#!/usr/bin/env bash

# Read URLs from stdin and try to open them in a browser
open_urls()
{
	local BROWSER=$BROWSER

	for BROWSER in "$BROWSER" xdg-open open
	do
		type "$BROWSER" &>/dev/null && break
	done

	while read -r
	do
		$BROWSER "$REPLY"
		sleep .1
	done
}

# Read URLs from given files and try to open them in a browser
#
# @param ... - URL files
open_urls_from()
{
	local FILE
	for FILE
	do
		open_urls < $FILE
	done
}

if [ "${BASH_SOURCE[0]}" == "$0" ]
then
	if (( $# < 1 ))
	then
		open_urls
	else
		open_urls_from "$@"
	fi
fi
