#!/usr/bin/env bash

# Recursively clean source directories
#
# @param 1 - root directory
clean_sources()
{
	local F D=${1:-.}

	for F in "$D"/*
	do
		[ -r "$F" ] || continue

		case "$F" in
			*/Makefile)
				(cd "$D" && make clean)
				;;
			*/build.xml)
				(cd "$D" && ant clean)
				;;
			*/gradlew)
				(cd "$D" && ./gradlew clean)
				;;
			*.o)
				rm "$F";
				;;
		esac

		if [ -d "$F" ]
		then
			clean_sources "$F"
		fi
	done
}

if [ "${BASH_SOURCE[0]}" == "$0" ]
then
	clean_sources "$@"
fi
